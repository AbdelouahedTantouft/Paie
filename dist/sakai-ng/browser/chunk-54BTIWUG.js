import{a as y,b as ie,c as re,d as se,e as ce}from"./chunk-NBTBOIRM.js";import{$a as Y,Ga as M,Sa as v,Ta as h,Ya as U,Za as b,ab as $,c as V,cb as K,db as Q,eb as W,fb as X,gb as Z,hb as ee,ib as te,jb as ne,kb as oe,l as J,m as u,mb as ae,na as C,nb as le,r as f}from"./chunk-5SQUVK4S.js";import{Bb as R,Bc as G,Dc as q,Hc as z,Ka as N,Nc as H,Oa as m,Ob as s,Pa as p,Q as x,V as L,Vb as D,Wb as B,Xb as k,Za as g,d as E,db as T,j as F,lb as d,n as j,ob as A,ub as o,vb as i,wb as r}from"./chunk-HHXAQUEM.js";var S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-access"]],decls:15,vars:0,consts:[[1,"bg-surface-50","dark:bg-surface-950","flex","items-center","justify-center","min-h-screen","min-w-[100vw]","overflow-hidden"],[1,"flex","flex-col","items-center","justify-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, rgba(247, 149, 48, 0.4) 10%, rgba(247, 149, 48, 0) 30%)"],[1,"w-full","bg-surface-0","dark:bg-surface-900","py-20","px-8","sm:px-20","flex","flex-col","items-center",2,"border-radius","53px"],[1,"gap-4","flex","flex-col","items-center"],[1,"flex","justify-center","items-center","border-2","border-orange-500","rounded-full",2,"width","3.2rem","height","3.2rem"],[1,"text-orange-500","pi","pi-fw","pi-lock","!text-2xl"],[1,"text-surface-900","dark:text-surface-0","font-bold","text-4xl","lg:text-5xl","mb-2"],[1,"text-muted-color","mb-8"],["src","https://primefaces.org/cdn/templates/sakai/auth/asset-access.svg","alt","Access denied","width","80%",1,"mb-8"],[1,"col-span-12","mt-8","text-center"],["label","Go to Dashboard","routerLink","/","severity","warn"]],template:function(e,a){e&1&&(r(0,"app-floating-configurator"),o(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),r(7,"i",6),i(),o(8,"h1",7),s(9,"Access Denied"),i(),o(10,"span",8),s(11,"You do not have the necessary permisions. Please contact admins."),i(),r(12,"img",9),o(13,"div",10),r(14,"p-button",11),i()()()()()())},dependencies:[h,v,f,u,M,y],encapsulation:2})};var O=class t{constructor(n){this.http=n}apiUrl="api";login(n){return j({id:"12345",token:"fake-jwt-token",message:"Connexion r\xE9ussie"})}static \u0275fac=function(e){return new(e||t)(L(V))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=class t{loginSuccessSource=new F;loginSuccess$=this.loginSuccessSource.asObservable();notifyLoginSuccess(){this.loginSuccessSource.next()}static \u0275fac=function(e){return new(e||t)};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})};var de=t=>({"ng-dirty ng-invalid":t}),ve=()=>({width:"50px",height:"50px"});function he(t,n){t&1&&(o(0,"div",17),r(1,"p-progressSpinner"),i()),t&2&&(m(),A(B(2,ve)))}var P=class t{constructor(n,e,a,c,l){this.router=n;this.authService=e;this.messageService=a;this.authSync=c;this.fb=l}matricule="";mdp="";load=!1;logo=null;name="";loginForm;ngOnInit(){this.loginForm=this.fb.group({email:["",[b.required,b.email]],password:["",b.required],remember:[!1]});let n=localStorage.getItem("entrlogdata");if(n){let e=JSON.parse(n);this.logo=e.logo}else this.router.navigate(["/"])}handleMatricule(n){this.matricule=n.target.value}handleMdp(n){this.mdp=n.target.value}login(n){return E(this,null,function*(){this.load=!0,n.preventDefault();let e=this.loginForm.value;if(e.email.trim()===""||e.password.trim()===""){this.messageService.add({severity:"error",summary:"Erreur",detail:"Tous les champs sont obligatoires",life:3e3}),this.load=!1;return}let a=localStorage.getItem("entrlogdata")?JSON.parse(localStorage.getItem("entrlogdata")):{},c={username:e.email,password:e.password,company:a.id};try{let l=yield this.authService.login(c).toPromise();l?.message.includes("Erreur")?this.messageService.add({severity:"error",summary:"Erreur",detail:l?.message,life:3e3}):(this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:l?.message,life:3e3}),this.authSync.notifyLoginSuccess(),localStorage.setItem("token","fake-jwt-token"),localStorage.setItem("user",JSON.stringify({id:"12345",name:"Utilisateur Test"})),setTimeout(()=>{this.router.navigate(["pages/company"])},3e3))}catch(l){this.messageService.add({severity:"warn",summary:"Attention",detail:"Syst\xE8me en maintenance",life:3e3}),console.error(l)}finally{this.load=!1}})}static \u0275fac=function(e){return new(e||t)(p(J),p(O),p(C),p(_),p(Z))};static \u0275cmp=g({type:t,selectors:[["app-login"]],features:[D([C])],decls:21,vars:10,consts:[[1,"login-container"],["class","progress-spinner-container",4,"ngIf"],["alt","","src","images/wave.jpg","height","200","width","600",1,"wave-background"],[1,"login-content"],[1,"logo-container"],[1,"company-logo",3,"alt","src"],["styleClass","login-card"],[1,"login-form",3,"ngSubmit","formGroup"],["alt","","ngSrc","images/profile.svg","height","698","width","698",1,"profile-icon"],[1,"login-title"],[1,"p-input-icon-left","w-full"],[1,"fas","fa-user"],["pInputText","","type","text","name","matricule","placeholder","Matricule","formControlName","email","required","",1,"w-full",3,"ngClass"],[1,"fas","fa-lock"],["pInputText","","type","password","name","password","placeholder","Mot de passe","pInputText","","formControlName","password","required","",1,"w-full",3,"ngClass"],["routerLink","/forgot-password",1,"forgot-password"],["type","submit","label","Se connecter","styleClass","login-button w-full"],[1,"progress-spinner-container"]],template:function(e,a){if(e&1&&(o(0,"div",0),T(1,he,2,3,"div",1),r(2,"p-toast")(3,"img",2),o(4,"div",3)(5,"div",4),r(6,"img",5),i(),o(7,"p-card",6)(8,"form",7),R("ngSubmit",function(l){return a.login(l)}),r(9,"img",8),o(10,"h2",9),s(11,"Bienvenu"),i(),o(12,"span",10),r(13,"i",11)(14,"input",12),i(),o(15,"span",10),r(16,"i",13)(17,"input",14),i(),o(18,"a",15),s(19," Mot de passe oubli\xE9? "),i(),r(20,"p-button",16),i()()()()),e&2){let c,l;m(),d("ngIf",a.load),m(5),d("alt",a.name)("src",a.logo,N),m(2),d("formGroup",a.loginForm),m(6),d("ngClass",k(6,de,((c=a.loginForm.get("email"))==null?null:c.touched)&&((c=a.loginForm.get("email"))==null?null:c.invalid))),m(3),d("ngClass",k(8,de,((l=a.loginForm.get("password"))==null?null:l.touched)&&((l=a.loginForm.get("password"))==null?null:l.invalid)))}},dependencies:[z,G,q,f,u,ee,K,U,Y,$,X,re,ie,h,v,oe,ne,le,ae,ce,se,H,te,Q,W],styles:[".login-container[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}.login-container[_ngcontent-%COMP%]   .progress-spinner-container[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.login-container[_ngcontent-%COMP%]   .wave-background[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover;z-index:-1}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2rem;z-index:1}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{max-width:200px;height:auto}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:1rem}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]     .p-card-content{padding:0}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:2rem}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .profile-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{text-align:center;color:var(--primary-color);margin:1rem 0}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{text-align:right;color:var(--primary-color);text-decoration:none;font-size:.9rem}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{margin-top:1rem}"]})};var I=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-error"]],decls:15,vars:0,consts:[[1,"bg-surface-50","dark:bg-surface-950","flex","items-center","justify-center","min-h-screen","min-w-[100vw]","overflow-hidden"],[1,"flex","flex-col","items-center","justify-center"],[2,"border-radius","56px","padding","0.3rem","background","linear-gradient(180deg, rgba(233, 30, 99, 0.4) 10%, rgba(33, 150, 243, 0) 30%)"],[1,"w-full","bg-surface-0","dark:bg-surface-900","py-20","px-8","sm:px-20","flex","flex-col","items-center",2,"border-radius","53px"],[1,"gap-4","flex","flex-col","items-center"],[1,"flex","justify-center","items-center","border-2","border-pink-500","rounded-full",2,"height","3.2rem","width","3.2rem"],[1,"pi","pi-fw","pi-exclamation-circle","!text-2xl","text-pink-500"],[1,"text-surface-900","dark:text-surface-0","font-bold","text-5xl","mb-2"],[1,"text-muted-color","mb-8"],["src","https://primefaces.org/cdn/templates/sakai/auth/asset-error.svg","alt","Error","width","80%",1,"mb-8"],[1,"col-span-12","mt-8","text-center"],["label","Go to Dashboard","routerLink","/","severity","danger"]],template:function(e,a){e&1&&(r(0,"app-floating-configurator"),o(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),r(7,"i",6),i(),o(8,"h1",7),s(9,"Error Occured"),i(),o(10,"span",8),s(11,"Requested resource is not available."),i(),r(12,"img",9),o(13,"div",10),r(14,"p-button",11),i()()()()()())},dependencies:[h,v,M,f,u,y],encapsulation:2})};var nt=[{path:"access",component:S},{path:"error",component:I},{path:"login",component:P}];export{nt as default};
